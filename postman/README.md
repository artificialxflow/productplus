# 🚀 راهنمای تست API های ProductPlus

این فولدر شامل فایل‌های Postman برای تست کامل backend پروژه ProductPlus است.

## 📁 فایل‌های موجود

- **`ProductPlus_API_Collection.json`** - کالکشن اصلی API ها
- **`ProductPlus_Server_Environment.json`** - محیط تست برای سرور (swpl.ir)
- **`ProductPlus_Local_Environment.json`** - محیط تست برای لوکال (localhost:3000)

## 🔧 نحوه Import کردن در Postman

### مرحله 1: Import Collection
1. Postman را باز کنید
2. روی دکمه **Import** کلیک کنید
3. فایل `ProductPlus_API_Collection.json` را انتخاب کنید
4. روی **Import** کلیک کنید

### مرحله 2: Import Environment
1. روی دکمه **Environments** در سمت چپ کلیک کنید
2. روی دکمه **Import** کلیک کنید
3. فایل Environment مورد نظر را انتخاب کنید:
   - برای سرور: `ProductPlus_Server_Environment.json`
   - برای لوکال: `ProductPlus_Local_Environment.json`
4. روی **Import** کلیک کنید

### مرحله 3: انتخاب Environment
1. از منوی کشویی بالای صفحه، Environment مورد نظر را انتخاب کنید
2. برای سرور: **ProductPlus Server Environment**
3. برای لوکال: **ProductPlus Local Environment**

## 🧪 نحوه تست کردن

### 📋 مراحل کلی تست

#### 1. **بررسی وضعیت سرور**
- ابتدا **Health Check** را اجرا کنید
- باید پاسخ `200 OK` دریافت کنید
- اگر خطا دریافت کردید، سرور مشکل دارد

#### 2. **تست Authentication**
```
1. ثبت نام کاربر جدید
2. ورود کاربر
3. تایید OTP (در صورت نیاز)
```

#### 3. **تست CRUD محصولات**
```
1. ایجاد دسته‌بندی جدید
2. ایجاد محصول جدید
3. دریافت لیست محصولات
4. ویرایش محصول
5. حذف محصول
```

#### 4. **تست سایر API ها**
```
1. مدیریت کاربران
2. مدیریت سفارشات
3. Bulk Import
```

## 🔐 تست Authentication

### مرحله 1: ثبت نام
1. **👤 ثبت نام کاربر** را انتخاب کنید
2. دکمه **Send** را بزنید
3. باید پاسخ `201 Created` دریافت کنید
4. اطلاعات کاربر در response ذخیره می‌شود

### مرحله 2: ورود
1. **🔑 ورود کاربر** را انتخاب کنید
2. دکمه **Send** را بزنید
3. باید پاسخ `200 OK` دریافت کنید
4. **Token به صورت خودکار ذخیره می‌شود**
5. **User ID به صورت خودکار ذخیره می‌شود**

### مرحله 3: تایید OTP (اختیاری)
1. **✅ تایید OTP** را انتخاب کنید
2. کد OTP را وارد کنید (معمولاً 123456)
3. دکمه **Send** را بزنید

## 📦 تست محصولات

### مرحله 1: ایجاد دسته‌بندی
1. **➕ ایجاد دسته‌بندی جدید** را انتخاب کنید
2. دکمه **Send** را بزنید
3. باید پاسخ `201 Created` دریافت کنید
4. **ID دسته‌بندی** را یادداشت کنید

### مرحله 2: ایجاد محصول
1. **➕ ایجاد محصول جدید** را انتخاب کنید
2. در Body، `categoryId` را با ID دسته‌بندی جایگزین کنید
3. دکمه **Send** را بزنید
4. باید پاسخ `201 Created` دریافت کنید

### مرحله 3: دریافت محصولات
1. **📋 دریافت لیست محصولات** را انتخاب کنید
2. دکمه **Send** را بزنید
3. باید پاسخ `200 OK` دریافت کنید
4. محصولات در response نمایش داده می‌شوند

## 🔍 تست جستجو و فیلتر

### جستجوی پیشرفته
1. **🔍 جستجو در محصولات** را انتخاب کنید
2. پارامترهای جستجو را تغییر دهید:
   - `search`: متن جستجو
   - `categoryId`: ID دسته‌بندی
   - `minPrice`: حداقل قیمت
   - `maxPrice`: حداکثر قیمت
3. دکمه **Send** را بزنید

## 👥 تست کاربران

### دریافت پروفایل
1. **👤 دریافت پروفایل کاربر** را انتخاب کنید
2. دکمه **Send** را بزنید
3. باید پاسخ `200 OK` دریافت کنید
4. اطلاعات پروفایل نمایش داده می‌شود

## 🛒 تست سفارشات

### ایجاد سفارش
1. **➕ ایجاد سفارش جدید** را انتخاب کنید
2. در Body، `userId` و `productId` را تنظیم کنید
3. دکمه **Send** را بزنید
4. باید پاسخ `201 Created` دریافت کنید

## 📤 تست Bulk Import

### آپلود فایل Excel
1. **📁 آپلود فایل Excel** را انتخاب کنید
2. در Body، فایل Excel را انتخاب کنید
3. دکمه **Send** را بزنید
4. باید پاسخ `200 OK` دریافت کنید

## ⚠️ نکات مهم

### 1. **ترتیب تست**
- همیشه ابتدا Authentication را تست کنید
- سپس دسته‌بندی و محصولات را ایجاد کنید
- در نهایت سایر API ها را تست کنید

### 2. **Token Management**
- Token به صورت خودکار ذخیره می‌شود
- برای تست API های محافظت شده، ابتدا Login کنید
- اگر Token منقضی شد، دوباره Login کنید

### 3. **Error Handling**
- کدهای خطا را بررسی کنید
- پیام‌های خطا را بخوانید
- Console Postman را برای اطلاعات بیشتر بررسی کنید

### 4. **Data Validation**
- ورودی‌ها را با مقادیر مختلف تست کنید
- مقادیر نامعتبر را تست کنید
- Boundary values را تست کنید

## 🐛 عیب‌یابی

### مشکل: 401 Unauthorized
**راه حل:** ابتدا Login کنید تا Token دریافت کنید

### مشکل: 404 Not Found
**راه حل:** URL را بررسی کنید و مطمئن شوید که سرور در حال اجرا است

### مشکل: 500 Internal Server Error
**راه حل:** 
1. لاگ‌های سرور را بررسی کنید
2. اتصال دیتابیس را بررسی کنید
3. Environment variables را بررسی کنید

### مشکل: CORS Error
**راه حل:** 
1. سرور را restart کنید
2. CORS headers را در سرور بررسی کنید

## 📊 تست Performance

### Load Testing
1. **Collection Runner** را باز کنید
2. Collection را انتخاب کنید
3. تعداد Iterations را تنظیم کنید
4. Delay بین درخواست‌ها را تنظیم کنید
5. **Run** را بزنید

### Monitoring
- Response time را بررسی کنید
- Status codes را بررسی کنید
- Error rate را محاسبه کنید

## 🔒 تست Security

### Authentication
- Token validation را تست کنید
- Expired token را تست کنید
- Invalid token را تست کنید

### Authorization
- Role-based access را تست کنید
- Admin-only endpoints را تست کنید
- User permissions را تست کنید

## 📝 گزارش‌گیری

### Export Results
1. **Collection Runner** را اجرا کنید
2. نتایج را **Export** کنید
3. فایل CSV یا JSON را ذخیره کنید

### Custom Reports
- Postman Monitor را تنظیم کنید
- Automated testing را پیاده‌سازی کنید
- CI/CD pipeline را اضافه کنید

## 🎯 بهترین شیوه‌ها

1. **Environment Variables** استفاده کنید
2. **Pre-request Scripts** برای setup استفاده کنید
3. **Tests** برای validation بنویسید
4. **Documentation** را به‌روز نگه دارید
5. **Version Control** برای Collection استفاده کنید

## 📞 پشتیبانی

اگر مشکلی در تست داشتید:
1. لاگ‌های سرور را بررسی کنید
2. Console Postman را بررسی کنید
3. Network tab مرورگر را بررسی کنید
4. با تیم توسعه تماس بگیرید

---

**نکته:** این Collection برای تست کامل backend طراحی شده است. همه API ها را به ترتیب تست کنید تا از عملکرد صحیح سیستم اطمینان حاصل کنید.
